<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Regulatory News Dashboard</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f7f9fb; }
h1 { color: #2c3e50; }
button { padding: 8px 12px; margin: 5px; cursor: pointer; border: none; background: #2c3e50; color: white; border-radius: 4px; }
button:hover { background: #34495e; }
.section { margin-bottom: 15px; }
.content { display: none; margin-top: 8px; padding-left: 10px; border-left: 3px solid #2c3e50; }
.filter { margin-bottom: 15px; }
.news-item { background: #fff; padding: 8px; margin-bottom: 5px; border-radius: 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.1);}
</style>
</head>
<body>

<h1>Regulatory News Dashboard</h1>

<div class="filter">
<label for="agencySelect">Filter by Agency:</label>
<select id="agencySelect">
  <option value="all">All Agencies</option>
  <option value="FCA">FCA</option>
  <option value="HMRC">HMRC</option>
  <option value="DWP">DWP</option>
  <option value="OFCOM">OFCOM</option>
  <option value="FATF">FATF</option>
  <option value="Trading Standards">Trading Standards</option>
  <option value="National Trading Standards">National Trading Standards</option>
</select>
</div>

<div id="dashboard"></div>

<script>
// Example news JSON structure
const newsData = [
  { agency: "FCA", title: "FCA updates payment firms guidance", date: "2025-11-23", link: "#" },
  { agency: "HMRC", title: "HMRC issues new AML guidance", date: "2025-11-22", link: "#" },
  { agency: "DWP", title: "DWP fraud prevention alert", date: "2025-11-21", link: "#" },
  { agency: "OFCOM", title: "OFCOM consults on telecom sanctions", date: "2025-11-20", link: "#" },
  { agency: "FATF", title: "FATF publishes 2027 MER planning", date: "2025-11-19", link: "#" },
  { agency: "Trading Standards", title: "Trading Standards warns of scam trends", date: "2025-11-18", link: "#" },
  { agency: "National Trading Standards", title: "NTS publishes annual priorities", date: "2025-11-17", link: "#" },
];

// Function to render the dashboard
function renderDashboard(filterAgency = "all") {
  const container = document.getElementById("dashboard");
  container.innerHTML = ""; // clear previous content

  const agencies = [...new Set(newsData.map(n => n.agency))];

  agencies.forEach(agency => {
    if (filterAgency !== "all" && agency !== filterAgency) return;

    const section = document.createElement("div");
    section.className = "section";

    const btn = document.createElement("button");
    btn.textContent = agency;
    btn.onclick = () => {
      const contentDiv = section.querySelector(".content");
      contentDiv.style.display = contentDiv.style.display === "block" ? "none" : "block";
    };

    const content = document.createElement("div");
    content.className = "content";

    const items = newsData.filter(n => n.agency === agency);
    items.forEach(item => {
      const newsDiv = document.createElement("div");
      newsDiv.className = "news-item";
      newsDiv.innerHTML = `<strong>${item.title}</strong> <br> Date: ${item.date} <br> <a href="${item.link}" target="_blank">Read more</a>`;
      content.appendChild(newsDiv);
    });

    section.appendChild(btn);
    section.appendChild(content);
    container.appendChild(section);
  });
}

// Initial render
renderDashboard();

// Filter change
document.getElementById("agencySelect").addEventListener("change", (e) => {
  renderDashboard(e.target.value);
});
</script>

</body>
</html>
