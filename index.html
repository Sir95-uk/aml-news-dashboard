<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AML & Regulatory Dashboard</title>
<style>
body { font-family: Arial, sans-serif; background: #f0f4f7; padding: 20px; }
h1, h2 { color: #1a3e5c; }
.section { margin-bottom: 15px; border-radius: 8px; padding: 10px; color: #fff; }
button { cursor: pointer; margin: 5px 0; padding: 8px 12px; border-radius: 4px; border: none; font-weight: bold; }
button:hover { opacity: 0.8; }
.content { display: none; margin-top: 10px; padding: 10px; border-radius: 6px; background: rgba(255,255,255,0.9); color: #000; }
table { width: 100%; border-collapse: collapse; margin-top: 10px; background: #fff; border-radius: 6px; overflow: hidden; }
th, td { padding: 8px; border-bottom: 1px solid #ddd; text-align: left; }
tr:nth-child(even) { background: #f2f2f2; }
.tag { display:inline-block; padding: 3px 6px; border-radius: 4px; margin-right:4px; font-size:12px; color:#fff; font-weight:bold; }
#filter, #search { margin:5px 10px 20px 0; padding:5px; border-radius:4px; border:1px solid #ccc; }
</style>
</head>
<body>

<h1>AML & Regulatory Dashboard</h1>

<label for="filter">Filter by Agency:</label>
<select id="filter">
  <option value="all">All Agencies</option>
</select>

<label for="search">Search:</label>
<input type="text" id="search" placeholder="Search news, priorities, tags...">

<div id="dashboard"></div>

<h2>Diary of Important Dates</h2>
<table id="diary">
  <thead>
    <tr>
      <th>Date</th>
      <th>Agency</th>
      <th>Title</th>
      <th>Tags</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
// --- Sample Data ---
const agencies = [
  { name: "HM Treasury", color:"#3498db", news:[
      { title:"New AML guidance", summary:"Updated AML rules for UK financial firms.", url:"#", tags:["AML"] },
      { title:"Budget 2026", summary:"Focuses on AML compliance and economic oversight.", url:"#", tags:["AML","Payment"] }
    ], priorities:["Strengthening UK AML regime","Economic oversight"], dates:[{date:"2025-12-01", title:"Consultation deadline", tags:["AML"]}]
  },
  { name: "Home Office", color:"#e67e22", news:[
      { title:"Immigration reform", summary:"Policy update for border and AML investigations.", url:"#", tags:["AML","Fraud"] }
    ], priorities:["Border security","AML support"], dates:[{date:"2025-11-30", title:"Policy release", tags:["AML"]}]
  },
  { name: "HMRC", color:"#2ecc71", news:[
      { title:"Crypto reporting updated", summary:"New guidance on cryptocurrency reporting for compliance.", url:"#", tags:["Crypto","AML"] }
    ], priorities:["Tax compliance","AML supervision"], dates:[{date:"2025-12-15", title:"Crypto guidance", tags:["Crypto","AML"]}]
  },
  { name: "FATF", color:"#9b59b6", news:[
      { title:"Next MER scheduled", summary:"UK's next Mutual Evaluation Review (MER) assessing AML regime.", url:"#", tags:["AML","Global"] }
    ], priorities:["Global AML standards","UK evaluation"], dates:[{date:"2027-01-01", title:"FATF MER 2027", tags:["AML","Global"]}]
  },
  { name: "FCA", color:"#e74c3c", news:[
      { title:"REP CRIM guidance released", summary:"Updated guidance for reporting obligations.", url:"#", tags:["AML","Payment"] }
    ], priorities:["Supervision of authorized firms","Crypto oversight"], dates:[{date:"2025-12-10", title:"Compliance deadline", tags:["AML","Payment"]}]
  }
];

// --- Populate Filter ---
const filter = document.getElementById("filter");
agencies.forEach(a => {
  const opt = document.createElement("option");
  opt.value = a.name;
  opt.textContent = a.name;
  filter.appendChild(opt);
});

// --- Render Dashboard ---
const dashboard = document.getElementById("dashboard");
const diaryBody = document.querySelector("#diary tbody");

function renderDashboard(filterValue="", search="") {
  dashboard.innerHTML = "";
  diaryBody.innerHTML = "";
  agencies.forEach(a => {
    if(filterValue && filterValue !== "all" && a.name !== filterValue) return;
    // Filter search
    const hasSearch = search.toLowerCase();
    const match = a.news.some(n => n.title.toLowerCase().includes(hasSearch) || n.summary.toLowerCase().includes(hasSearch) || n.tags.join().toLowerCase().includes(hasSearch));
    if(search && !match) return;

    const section = document.createElement("div");
    section.className="section";
    section.style.background=a.color;

    const btn = document.createElement("button");
    btn.textContent=a.name;
    btn.onclick=()=>{ content.style.display=content.style.display==="block"?"none":"block"; };
    section.appendChild(btn);

    const content = document.createElement("div");
    content.className="content";

    const hNews = document.createElement("h3");
    hNews.textContent="News & Updates";
    content.appendChild(hNews);

    a.news.forEach(n=>{
      const p = document.createElement("p");
      const tags = n.tags.map(t=>`<span class="tag" style="background:${a.color}">${t}</span>`).join(" ");
      p.innerHTML=`<strong>${n.title}</strong> - <a href="${n.url}" target="_blank">Read more</a><br>${n.summary}<br>${tags}`;
      content.appendChild(p);
    });

    const hPri = document.createElement("h3");
    hPri.textContent="Priorities";
    content.appendChild(hPri);
    const pri = document.createElement("ul");
    a.priorities.forEach(p=>{ const li=document.createElement("li"); li.textContent=p; pri.appendChild(li); });
    content.appendChild(pri);

    section.appendChild(content);
    dashboard.appendChild(section);

    // Populate diary
    a.dates.forEach(d=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`<td>${d.date}</td><td>${a.name}</td><td>${d.title}</td><td>${d.tags.join(", ")}</td>`;
      diaryBody.appendChild(tr);
    });
  });
}

// --- Initial render ---
renderDashboard();

// --- Event Listeners ---
filter.addEventListener("change", ()=>{ renderDashboard(filter.value, document.getElementById("search").value); });
document.getElementById("search").addEventListener("input", ()=>{ renderDashboard(filter.value, document.getElementById("search").value); });

</script>
</body>
</html>
